name: Natural Daily Contributions

on:
  schedule:
    - cron: "0 5 * * *" # Runs daily at 1:00 PM PH time
  workflow_dispatch:

jobs:
  contribute:
    runs-on: ubuntu-latest
    permissions:
      contents: write

    steps:
      - name: Checkout
        uses: actions/checkout@v4
        with:
          token: ${{ secrets.PAT }}

      - name: Setup environment
        run: |
          mkdir -p activity
          echo "Preparing commit files..."

      - name: Make 10–15 random commits across files
        run: |
          COMMITS=$((10 + RANDOM % 6))  # 10–15 commits
          echo "Will create $COMMITS commits"

          for ((i=1; i<=$COMMITS; i++)); do
            FILE="activity/log_$i.txt"
            echo "Update #$i at $(date)" >> $FILE
            git add $FILE
            git commit -m "Daily activity update ($i)"
            sleep $((5 + RANDOM % 15))  # short safe delay 5–20 sec
          done

      - name: Push changes
        run: |
          git push origin HEAD
